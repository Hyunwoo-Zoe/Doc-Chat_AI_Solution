# ⭐ 팀 공통 주석 가이드

> Python 3.11 · FastAPI/Backend 코드베이스 전용 (2025‑07‑24 버전)
>
> *목적*: 모든 소스 파일에서 **읽기 쉬운 일관된 주석**을 유지해 코드 리뷰·온보딩·자동 문서화를 쉽게 한다.

---

## 1. 기본 원칙

| 규칙                    | 설명                                                                |
| --------------------- | ----------------------------------------------------------------- |
| **KISS**              | 주석은 *꼭 필요한 정보*만, 간결하게. 코드 자체로 자명한 내용은 생략.                         |
| **왜(Why) > 무엇(What)** | *동작*보단 *의도* 설명에 집중. 동작은 코드가 보여준다.                                 |
| **한국어로, 용어는 원어 사용**   | 팀 언어 = 한국어. 단, “redis‑hash”, “TTL” 같이 고유 기술어는 그대로 표기.             |
| **PEP 8 · 257 준수**    | 1) 88 column, 2) docstring은 PEP 257 규칙.                           |
| **자동 문서화 호환**         | Google‑style docstring(Args/Returns/Raises) 사용 → IDE & Sphinx 지원. |

---

## 2. 주석 레이어

1. **모듈(파일) docstring**  : 파일 최상단 3줄 이내 요약 + 필요 시 사용 예.
2. **클래스 docstring**      : 역할·주요 속성(`Attributes:`) 정리.
3. **함수/메서드 docstring** : 한 줄 요약 + `Args / Returns / Raises` 블록.
4. **섹션 헤더 주석**        : 긴 파일에서 논리적 구역을 구분.
5. **인라인 ****\`\`**** 주석**      : 복잡한 로직 한 줄 위 또는 옆에서 ‘이유’ 강조.

---

## 3. 서식 예시

### 3.1 모듈 헤더

```python
"""cache_db.py
Redis 기반 캐시 유틸리티.
요약본·로그·피드백 CRUD 제공.
"""
```

### 3.2 클래스 docstring

```python
class RedisCacheDB:
    """Redis 캐시 어댑터.

    Attributes:
        r: redis.Redis 인스턴스.
        ttl_days: 기본 TTL(일)
    """
```

### 3.3 메서드 docstring (Google‑style)

```python
def set_pdf(self, fid: str, summary: str) -> None:
    """PDF 요약본을 저장하고 메타데이터를 갱신한다.

    Args:
        fid: 파일 ID (ex. "fid_ab12").
        summary: 저장할 요약 문자열.

    Returns:
        None
    """
```

### 3.4 섹션 헤더

```python
# ───────────────────── 요약본 저장 / 삭제 ─────────────────────
```

- 길이: 70–80자 내외 (88 col 넘지 말 것)
- 두꺼운 선(─)은 `Alt+0151` 혹은 복사 사용.

### 3.5 인라인 주석

```python
expiry = self.ttl_days * 86_400  # 일(day)을 초(second)로 변환
```

---

## 4. 체크리스트

PR 머지 전 **셀프 리뷰**·코드 리뷰 시 아래 항목을 확인합니다.

| 번호  | 체크 항목                       | 확인 방법 / 이유                                   |
| --- | --------------------------- | -------------------------------------------- |
| 1   | **모듈 헤더** 존재                | 파일 최상단 1‑3줄 docstring이 *무엇을 하는 파일인지* 설명하는가?  |
| 2   | **클래스 docstring**           | 주요 속성과 역할이 `Attributes:` 블록에 정리되어 있는가?       |
| 3‑1 | **함수 요약 문장**                | 첫 줄이 동사형 한 문장으로 끝나는가? (예: *Return*, *Store*) |
| 3‑2 | **Args / Returns / Raises** | 필요한 경우 세 블록이 채워져 있는가? 간단 함수는 생략 가능.          |
| 4   | **라인 길이 88자**               | `black` 포맷 후 재정렬 되었는가? 주석도 포함.               |
| 5   | **섹션 헤더**                   | 70‑80자 선, 남용 없이 논리적 구역만 구분했는가?               |
| 6   | **인라인 주석**                  | ‘동작 설명’이 아닌 ‘이유 설명’인가? 한국어 + 기술 용어 원어 유지.    |
| 7   | **TODO / FIXME**            | `# TODO(ABC): ...` 형식, 이유·만료일 명시.            |
| 8   | **라이선스·출처**                 | 외부 코드 인용 시 링크·출처·라이선스 주석을 포함했는가?             |

---

